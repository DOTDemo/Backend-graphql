types: ./types.graphql

functions:
  # Resolvers
  signupUser:
    type: resolver
    schema: src/extensions/signup/signup.graphql
    handler:
      code:
        src: src/extensions/signup/signup.ts

  loginUser:
    type: resolver
    schema: src/extensions/login/login.graphql
    handler:
      code:
        src: src/extensions/login/login.ts

  loggedInUser:
    type: resolver
    schema: src/extensions/loggedInUser/loggedInUser.graphql
    handler:
      code:
        src: src/extensions/loggedInUser/loggedInUser.ts

  updatePassword:
    type: resolver
    schema: src/extensions/updatePassword/updatePassword.graphql
    handler:
      code:
        src: src/extensions/updatePassword/updatePassword.ts

  updateEmail:
    type: resolver
    schema: src/extensions/updateEmail/updateEmail.graphql
    handler:
      code:
        src: src/extensions/updateEmail/updateEmail.ts

  forgotPassword:
    type: resolver
    schema: ./src/extensions/forgotPassword/forgotPassword.graphql
    handler:
      code:
        src: ./src/extensions/forgotPassword/forgotPassword.ts

  resetPassword:
    type: resolver
    schema: ./src/extensions/resetPassword/resetPassword.graphql
    handler:
      code:
        src: ./src/extensions/resetPassword/resetPassword.ts      

  # Subscription
  passwordResetMail:
    type: subscription
    query: ./src/subscriptions/passwordResetMail/passwordResetMail.graphql
    handler: 
      code: ./src/subscriptions/passwordResetMail/passwordResetMail.ts

permissions:
  # User
  - operation: User.read
    authenticated: false
    fields: 
      - id 
      - email
  - operation: User.create
    authenticated: false
  - operation: User.update
    authenticated: true
    query: ./src/permissions/user.graphql:userUpdate
  - operation: User.delete
    authenticated: true
    query: ./src/permissions/user.graphql:userDelete
  # Post
  - operation: Post.read
    authenticated: false
  - operation: Post.create
    authenticated: false
  - operation: Post.update
    authenticated: true
    query: ./src/permissions/post.graphql:postUpdate
  - operation: Post.delete
    authenticated: true
    query: ./src/permissions/post.graphql:postDelete

rootTokens:
  - signupUser
  - loginUser
  - loggedInUser
  - updatePassword
  - updateEmail
  - forgotPassword
  - resetPassword
  - passwordResetMail
